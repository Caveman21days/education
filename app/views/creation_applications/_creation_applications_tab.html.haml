.page-content

  %h2 В ожидании
  .fancy-table-container.creation-applications-table
    %table
      %thead
        %tr
          %th.id Заявка
          %th.name Отправитель
          %th.parent Где
          %th.object_type Что создать
          %th.short_description Краткое описание

      %tbody
        - creation_applications.select { |application| application.status == 'pending' }.each do |application|
          %tr
            %th
              = link_to application.id, creation_application_path(application)

            %td
              = link_to application.user.full_name, user_path(application.user)

            %td
              = link_to "#{application.creation_applicable_type}: #{application.creation_applicable.name}", field_path(application.creation_applicable)
            %td
              = application.object_type
            %td
              = application.object_details[:short_description]

  %h2 Принятые
  .fancy-table-container.creation-applications-table
    %table
      %thead
        %tr
          %th.id Заявка
          %th.name Отправитель
          %th.parent Где
          %th.object_type Что создать
          %th.short_description Краткое описание

      %tbody
        - creation_applications.select { |application| application.status == 'accepted' }.each do |application|
          %tr
            %th
              = application.id

            %td
              = link_to application.user.full_name, user_path(application.user)

            %td
              = link_to "#{application.creation_applicable_type}: #{application.creation_applicable.name}", field_path(application.creation_applicable)
            %td
              = application.object_type
            %td
              = application.object_details[:short_description]

  %h2 Отклоненные
  .fancy-table-container.creation-applications-table
    %table
      %thead
        %tr
          %th.id Заявка
          %th.name Отправитель
          %th.parent Где
          %th.object_type Что создать
          %th.short_description Краткое описание

      %tbody
        - creation_applications.select { |application| application.status == 'rejected' }.each do |application|
          %tr
            %th
              = application.id

            %td
              = link_to application.user.full_name, user_path(application.user)

            %td
              = link_to "#{application.creation_applicable_type}: #{application.creation_applicable.name}", field_path(application.creation_applicable)
            %td
              = application.object_type
            %td
              = application.object_details[:short_description]


